(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(29),r=n.n(c),i=(n(89),n(2)),o=n(7),l=n(11),d=n(13),j=n(12),h=(n(90),n(91),n(136)),u=n(130),b=n(81),p=n(137),O=n(131),x=n(9),m=n(17),v=n.n(m),g=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e,n){return t.app.post("/auth/signup",{email:e,password:n})},this.login=function(e,n){return t.app.post("/auth/login",{email:e,password:n})},this.logout=function(){return t.app.get("/auth/logout")},this.isloggedin=function(){return t.app.get("/auth/isloggedin")},this.app=v.a.create({baseURL:"https://eleven-one-project.herokuapp.com/api",withCredentials:!0,credentials:"include"})},f=n.p+"static/media/eleven-one-logo.1b44537e.png",C=n(0),k=new g,S=function(e){var t=e.loggedUser,n=e.storeUser,a=e.productsQuantity;return Object(C.jsx)(h.a,{bg:"light",variant:"light",children:Object(C.jsxs)(u.a,{children:[Object(C.jsx)(b.a,{children:Object(C.jsxs)(p.a.Link,{as:x.b,to:"/",children:[" ",Object(C.jsx)("img",{className:"logito",src:f})," "]})}),Object(C.jsx)(b.a,{children:Object(C.jsxs)(p.a,{className:"me-auto nav-position navigation-arrow",children:[Object(C.jsx)(p.a.Link,{as:x.b,to:"/sneakers",children:"Shop"}),t?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a.Link,{as:x.b,to:"/profile",children:"User profile"}),Object(C.jsxs)(p.a.Link,{as:x.b,to:"/cart",children:["Cart ",Object(C.jsx)(O.a,{pill:!0,bg:"secondary",children:a})]}),Object(C.jsx)(p.a.Link,{as:"span",onClick:function(){k.logout().then((function(e){return n(null)})).catch((function(e){return console.log(e)}))},children:"logout"})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(p.a.Link,{as:x.b,to:"/signup",children:"Signup"}),Object(C.jsx)(p.a.Link,{as:x.b,to:"/login",children:"Login"})]})]})})]})})},y=n(6),w=n(132),U=n(135),I=n(133),N=(n(120),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.authService.signup(a.state.email,a.state.password).then((function(e){a.props.storeUser(e.data),window.location="/login"})).catch((function(e){return console.log(e.response.data.message)}))},a.handleInputChange=function(e){var t=e.currentTarget,n=t.name,s=t.value;a.setState(Object(y.a)({},n,s))},a.state={email:"",password:""},a.authService=new g,a}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsx)(u.a,{className:"signup",children:Object(C.jsx)(w.a,{children:Object(C.jsxs)(b.a,{md:{span:4,offset:4},children:[Object(C.jsx)("h2",{children:"Signup"}),Object(C.jsx)("hr",{}),Object(C.jsxs)(U.a,{onSubmit:this.handleSubmit,children:[Object(C.jsxs)(U.a.Group,{className:"mb-3",controlId:"email",children:[Object(C.jsx)(U.a.Label,{children:"Email"}),Object(C.jsx)(U.a.Control,{onChange:this.handleInputChange,value:this.state.email,name:"email",type:"email",placeholder:"Email"})]}),Object(C.jsxs)(U.a.Group,{className:"mb-3",controlId:"password",children:[Object(C.jsx)(U.a.Label,{children:"Password"}),Object(C.jsx)(U.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password",placeholder:"Password"})]}),Object(C.jsx)(I.a,{variant:"dark",type:"submit",children:"Submit"})]})]})})})}}]),n}(a.Component)),L=(n(121),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.authService.login(a.state.email,a.state.password).then((function(e){a.props.storeUser(e.data),window.location="/"})).catch((function(e){return console.log(e)}))},a.handleInputChange=function(e){var t=e.currentTarget,n=t.name,s=t.value;a.setState(Object(y.a)({},n,s))},a.state={email:"",password:""},a.authService=new g,a}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsx)(u.a,{className:"login",children:Object(C.jsx)(w.a,{children:Object(C.jsxs)(b.a,{md:{span:4,offset:4},children:[Object(C.jsx)("h2",{children:"Login"}),Object(C.jsx)("hr",{}),Object(C.jsxs)(U.a,{onSubmit:this.handleSubmit,children:[Object(C.jsxs)(U.a.Group,{className:"mb-3",controlId:"email",children:[Object(C.jsx)(U.a.Label,{children:"Email"}),Object(C.jsx)(U.a.Control,{onChange:this.handleInputChange,value:this.state.email,name:"email",type:"email",placeholder:"Nombre de usuario"})]}),Object(C.jsxs)(U.a.Group,{className:"mb-3",controlId:"password",children:[Object(C.jsx)(U.a.Label,{children:"Password"}),Object(C.jsx)(U.a.Control,{onChange:this.handleInputChange,value:this.state.password,name:"password",type:"password",placeholder:"Password"})]}),Object(C.jsx)(I.a,{variant:"dark",type:"submit",children:"Submit"})]})]})})})}}]),n}(a.Component)),P=n(14),_=function e(){var t=this;Object(o.a)(this,e),this.addProduct=function(e,n){return t.app.post("/".concat(e,"/").concat(n))},this.removeProduct=function(e,n){return t.app.put("/".concat(e,"/").concat(n))},this.getCart=function(e){return t.app.get("/details/".concat(e))},this.emptyCart=function(e){return t.app.delete("/".concat(e))},this.app=v.a.create({baseURL:"".concat("https://eleven-one-project.herokuapp.com/api","/cart"),withCredentials:!0})},T=n(139),F=n(140),G=(n(122),n.p+"static/media/imagen-nike.089e61f2.jpeg"),A=n.p+"static/media/vansta.1eb9b8e9.webp",Q=n.p+"static/media/vansskate.c80bec3a.webp",B=n.p+"static/media/eleven-one-logo.1b44537e.png",R=function(e){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(T.a,{className:"tiovivo",children:[Object(C.jsx)(T.a.Item,{children:Object(C.jsx)("img",{className:"d-block w-100",src:G,alt:"First slide"})}),Object(C.jsx)(T.a.Item,{children:Object(C.jsx)("img",{className:"d-block w-100",src:A,alt:"Second slide"})}),Object(C.jsx)(T.a.Item,{children:Object(C.jsx)("img",{className:"d-block w-100",src:Q,alt:"Third slide"})})]}),Object(C.jsxs)("div",{className:"overlay",children:[Object(C.jsx)("img",{src:B,alt:"Logotipo"}),Object(C.jsx)(x.b,{id:"button-name-home",to:"/sneakers",children:"Shop"})]}),Object(C.jsx)(F.a,{children:Object(C.jsx)(F.a.Body,{children:Object(C.jsx)("footer",{className:"blockquote-footer",children:Object(C.jsx)("p",{title:"Source Title",children:"Made by Bego\xf1a S\xe1nchez Gallardo & Anal\xeda Alejandra L\xf3pez "})})})})]})},D=function e(){var t=this;Object(o.a)(this,e),this.getAllSneakers=function(){return t.app.get("/sneakers")},this.getOneSneaker=function(e){return t.app.get("/sneakers/".concat(e))},this.app=v.a.create({baseURL:"https://eleven-one-project.herokuapp.com/api",withCredentials:!0})},E=(n(123),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.currentTarget.value.toLowerCase();a.setState({text:t}),a.props.refreshSneakers(a.state.text)},a.state={text:""},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsx)("input",{className:"search-bar",type:"search",onChange:this.handleChange,value:this.state.text,name:"text",placeholder:"  Search by brand"})})}}]),n}(a.Component)),V=(n(68),n(52)),M=n(138),H=function(e){var t=e.show,n=e.handleClose,a=e.removeSneakersLink;return Object(C.jsxs)(M.a,{show:t,onHide:n,children:[Object(C.jsx)(M.a.Header,{closeButton:!0,children:Object(C.jsx)(M.a.Title,{children:"Congratulations"})}),Object(C.jsx)(M.a.Body,{children:"The sneaker has been added to the cart"}),Object(C.jsxs)(M.a.Footer,{children:[!a&&Object(C.jsx)(x.b,{className:"button-name",to:"/sneakers",children:"Back to sneakers"}),Object(C.jsx)(x.b,{className:"button-name",to:"/cart",children:"Check your cart"})]})]})},J=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){a.service.getAllSneakers().then((function(e){a.setState({sneakers:e.data}),a.setState({initialSneakers:e.data})}))},a.refreshSneakers=function(e){var t=e.toLowerCase().trim();if(t){var n=a.state.initialSneakers.filter((function(e){return"".concat(e.brand," ").concat(e.name).toLowerCase().includes(t)}));a.setState({sneakers:n})}else a.setState({sneakers:a.state.initialSneakers})},a.handleBuyClick=function(e,t){a.props.addCartItem(e,t),a.setState({purchase:!0})},a.handleClose=function(){a.setState({purchase:!1})},a.state={sneakers:[],initialSneakers:[],purchase:!1},a.service=new D,a}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsxs)(u.a,{id:"card-sneakers",children:[Object(C.jsx)(b.a,{md:12,children:Object(C.jsxs)(w.a,{children:[Object(C.jsx)(E,{refreshSneakers:this.refreshSneakers}),this.state.sneakers.map((function(t,n){return Object(C.jsxs)(F.a,{style:{width:"18rem"},className:"card-sneakers",children:[Object(C.jsx)(x.b,{className:"list-card-bg",as:"a",to:"/sneakers/".concat(t._id),children:Object(C.jsx)(F.a.Img,{variant:"top",src:t.image.thumbnail,alt:t.name})}),Object(C.jsxs)(F.a.Body,{children:[Object(C.jsxs)(F.a.Title,{id:"cardTitle",children:[t.brand," | ",t.name]}),Object(C.jsxs)(w.a,{children:[Object(C.jsx)(b.a,{className:"list-card-price",children:Object(C.jsxs)("strong",{children:[t.retailPrice,"\u20ac"]})}),Object(C.jsxs)(b.a,{children:[e.props.loggedUser&&Object(C.jsx)(I.a,{onClick:function(){return e.handleBuyClick(e.props.loggedUser._id,t._id)},variant:"light",className:"list-buy-button",children:Object(C.jsx)(V.a,{})}),Object(C.jsx)(x.b,{className:"list-info-button btn btn-light",as:"a",to:"/sneakers/".concat(t._id),children:Object(C.jsx)(V.b,{})})]})]})]})]})}))]})}),Object(C.jsx)(H,{show:this.state.purchase,handleClose:this.handleClose,removeSneakersLink:!0})]})}}]),n}(a.Component),q=function e(){var t=this;Object(o.a)(this,e),this.createReview=function(e){return t.app.post("/",e)},this.getValuation=function(e){return t.app.get("/".concat(e))},this.getAllValuations=function(e){return t.app.get("/all/".concat(e))},this.app=v.a.create({baseURL:"".concat("https://eleven-one-project.herokuapp.com/api","/valuation"),withCredentials:!0})},z=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.currentTarget,n=t.name,s=t.value;a.setState(Object(y.a)({},n,s))},a.handleSubmit=function(e){e.preventDefault(),a.valuationService.createReview(a.state).then((function(){a.props.refreshValuations()})).catch((function(e){return console.log(e)}))},a.state={rating:0,comment:"",productId:a.props.productId},a.valuationService=new q,a}return Object(l.a)(n,[{key:"render",value:function(){return Object(C.jsxs)(u.a,{children:[Object(C.jsx)(w.a,{children:Object(C.jsxs)(U.a,{onSubmit:this.handleSubmit,children:[Object(C.jsxs)(U.a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[Object(C.jsx)(U.a.Label,{children:"Puntuaci\xf3n"}),Object(C.jsxs)(U.a.Select,{onChange:this.handleChange,value:this.state.rating,name:"rating",children:[Object(C.jsx)("option",{children:"Select your rating"}),Object(C.jsx)("option",{value:"0",children:"0"}),Object(C.jsx)("option",{value:"1",children:"1"}),Object(C.jsx)("option",{value:"2",children:"2"}),Object(C.jsx)("option",{value:"3",children:"3"}),Object(C.jsx)("option",{value:"4",children:"4"}),Object(C.jsx)("option",{value:"5",children:"5"})]})]}),Object(C.jsxs)(U.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(C.jsx)(U.a.Label,{children:"Escribe un comentario"}),Object(C.jsx)(U.a.Control,{onChange:this.handleChange,value:this.state.comment,name:"comment",as:"textarea",rows:3})]}),Object(C.jsx)(I.a,{variant:"dark",className:"button-name",type:"submit",children:"Submit"})]})}),Object(C.jsx)("hr",{}),Object(C.jsx)(w.a,{children:this.props.comments.map((function(e,t){var n;return Object(C.jsxs)("div",{children:[Object(C.jsxs)("p",{children:["User: ",Object(C.jsx)("strong",{children:null===(n=e.userId)||void 0===n?void 0:n.firstName})," | Rating: ",Object(C.jsx)("strong",{children:e.rating})]}),Object(C.jsxs)("p",{children:["Comment: ",e.comment]}),Object(C.jsx)("hr",{})]},t)}))})]})}}]),n}(a.Component),Y=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).refreshValuations=function(){a.valuationService.getAllValuations(a.state.sneaker._id).then((function(e){return a.setState({comments:e.data})}))},a.handleClick=function(e,t){a.props.addCartItem(e,t),a.setState({purchase:!0})},a.handleClose=function(){a.setState({purchase:!1})},a.state={sneaker:void 0,purchase:!1,comments:[]},a.service=new D,a.cartService=new _,a.valuationService=new q,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.service.getOneSneaker(this.props.match.params.id).then((function(t){return e.setState({sneaker:t.data}),e.valuationService.getAllValuations(e.state.sneaker._id)})).then((function(t){e.setState({comments:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.sneaker;return Object(C.jsx)(u.a,{children:t&&Object(C.jsxs)(w.a,{children:[Object(C.jsxs)(b.a,{md:6,children:[Object(C.jsx)("img",{src:t.image.thumbnail,alt:t.name}),Object(C.jsx)("div",{children:Object(C.jsx)(z,{comments:this.state.comments,productId:this.state.sneaker._id,refreshValuations:this.refreshValuations})})]}),Object(C.jsx)(b.a,{id:"text-col",md:6,children:Object(C.jsxs)("article",{children:[Object(C.jsxs)("h2",{children:[t.name," | ",t.brand]}),Object(C.jsxs)("p",{children:[t.name," "]}),Object(C.jsxs)("p",{children:["Ref: ",t.sku]}),Object(C.jsxs)("p",{children:["Color: ",t.colorway]}),Object(C.jsxs)("p",{children:["Price: ",t.retailPrice,"\u20ac"]}),Object(C.jsxs)("p",{children:["Market Price: ",t.estimatedMarketValue,"\u20ac"]}),Object(C.jsx)("p",{children:t.story}),Object(C.jsxs)("div",{className:"comprar",children:[Object(C.jsx)(x.b,{className:"button-name",to:"/sneakers",children:"Volver a Zapatillas"}),this.props.loggedUser?Object(C.jsx)(I.a,{variant:"dark",onClick:function(){return e.handleClick(e.props.loggedUser._id,t._id)},className:"button-name",children:"Comprar"}):Object(C.jsx)(x.b,{className:"button-name",to:"/login",children:"Login para comprar"}),Object(C.jsx)(H,{show:this.state.purchase,handleClose:this.handleClose})]})]})})]})})}}]),n}(a.Component),W=function e(){var t=this;Object(o.a)(this,e),this.confirmPurchase=function(e){return t.app.post("/".concat(e))},this.getInvoice=function(e){return t.app.get("/".concat(e))},this.getAllInvoices=function(e){return t.app.get("/all/".concat(e))},this.app=v.a.create({baseURL:"".concat("https://eleven-one-project.herokuapp.com/api","/invoice"),withCredentials:!0})},Z=n(134),K=function e(){var t=this;Object(o.a)(this,e),this.sendEmail=function(e){return t.app.post("/bill/".concat(e))},this.app=v.a.create({baseURL:"".concat("https://eleven-one-project.herokuapp.com/api","/nodemailer"),withCredentials:!0})},X=(n(124),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handlePurchase=function(){a.invoiceService.confirmPurchase(a.props.loggedUser._id).then((function(e){var t=e.data;a.cartService.emptyCart(a.props.loggedUser._id).then((function(e){a.nodemailerService.sendEmail(t._id),window.location="/confirmation/".concat(t._id)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},a.state={},a.cartService=new _,a.invoiceService=new W,a.nodemailerService=new K,a}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=0;return Object(C.jsx)(C.Fragment,{children:this.props.cart&&0!==this.props.cart.products.length?Object(C.jsxs)(u.a,{children:[Object(C.jsx)(w.a,{className:"cart-list",children:Object(C.jsxs)(Z.a,{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Product"}),Object(C.jsx)("th",{children:"Colorway"}),Object(C.jsx)("th",{children:"Price"}),Object(C.jsx)("th",{})]})}),Object(C.jsxs)("tbody",{children:[this.props.cart.products.map((function(n,a){return t=n.retailPrice,Object(C.jsxs)("tr",{children:[Object(C.jsxs)("td",{children:[Object(C.jsx)("img",{className:"thumbnail",src:n.image.thumbnail}),n.name]}),Object(C.jsx)("td",{children:n.colorway}),Object(C.jsxs)("td",{children:["\u20ac",n.retailPrice]}),Object(C.jsx)("td",{children:Object(C.jsx)(I.a,{variant:"danger",onClick:function(){return e.props.removeCartItem(e.props.loggedUser._id,n._id)},children:Object(C.jsx)(V.c,{})})})]},a)})),Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsxs)("td",{children:[t,"\u20ac",Object(C.jsx)("strong",{children:" subtotal"})]}),Object(C.jsx)("td",{})]}),Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsxs)("td",{children:[(.21*t).toFixed(2),"\u20ac",Object(C.jsx)("strong",{children:" taxes (21%)"})]}),Object(C.jsx)("td",{})]}),Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsxs)("td",{children:[(.21*t+t).toFixed(2),"\u20ac",Object(C.jsx)("strong",{children:"TOTAL"})]}),Object(C.jsx)("td",{})]})]})]})}),Object(C.jsxs)(w.a,{children:[Object(C.jsx)(b.a,{md:2,children:Object(C.jsx)(I.a,{variant:"danger",onClick:function(){return e.props.emptyCart(e.props.loggedUser._id)},children:"Empty cart"})}),Object(C.jsx)(b.a,{md:{span:2,offset:8},children:Object(C.jsx)(I.a,{variant:"success",onClick:this.handlePurchase,children:"Confirm and pay"})})]})]}):Object(C.jsx)("h1",{className:"cart-empty",children:"No tienes elementos en tu carrito..."})})}}]),n}(s.a.Component)),$=(n(125),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={invoice:void 0},a.invoiceService=new W,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.invoiceService.getInvoice(this.props.match.params.invoiceId).then((function(t){e.setState({invoice:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.invoice;return Object(C.jsx)(u.a,{className:"confirmation-container",children:this.state.invoice&&Object(C.jsxs)(w.a,{children:[Object(C.jsxs)("div",{children:[Object(C.jsxs)(b.a,{children:[Object(C.jsx)("h1",{children:"SneakerHack"}),Object(C.jsx)("p",{children:"Your sneakers store"})]}),Object(C.jsx)(b.a,{}),Object(C.jsxs)(Z.a,{children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Product"}),Object(C.jsx)("th",{children:"Colorway"}),Object(C.jsx)("th",{children:"Price"})]})}),Object(C.jsxs)("tbody",{children:[e.products.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.name}),Object(C.jsx)("td",{children:e.colorway}),Object(C.jsxs)("td",{children:["\u20ac",e.retailPrice]})]},t)})),Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsxs)("td",{children:[e.subtotal,"\u20ac",Object(C.jsx)("strong",{children:" subtotal"})]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsxs)("td",{children:[e.taxes,"\u20ac",Object(C.jsx)("strong",{children:" taxes (21%)"})]})]}),Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{}),Object(C.jsxs)("td",{children:[e.total,"\u20ac",Object(C.jsx)("strong",{children:" TOTAL"})]})]})]})]})]}),Object(C.jsx)(x.b,{className:"button-name",to:"/sneakers",children:"Return to sneakers list"})]})})}}]),n}(a.Component)),ee=function e(){var t=this;Object(o.a)(this,e),this.getProfile=function(e){return t.app.get("/".concat(e))},this.editProfile=function(e,n){return t.app.post("/edit/".concat(e),n)},this.deleteProfile=function(e){return t.app.post("/delete/".concat(e))},this.app=v.a.create({baseURL:"".concat("https://eleven-one-project.herokuapp.com/api","/profile"),withCredentials:!0})},te=(n(126),function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.profileService.editProfile(a.props.loggedUser._id,a.state.user).then((function(e){a.props.storeUser(a.state.user),a.setState({saved:!0})})).catch((function(e){return console.log(e)}))},a.handleInputChange=function(e,t){if(!0===t){var n=e.currentTarget,s=n.name,c=n.value;a.setState((function(e){return{user:{address:Object(i.a)(Object(i.a)({},e.address),{},Object(y.a)({},s,c))}}}))}var r=e.currentTarget,o=r.name,l=r.value;a.setState({user:Object(y.a)({},o,l)})},a.handleClose=function(){a.setState({saved:!1})},a.state={user:void 0,invoices:[],saved:!1},a.profileService=new ee,a.invoiceService=new W,a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.profileService.getProfile(this.props.loggedUser._id).then((function(t){return e.setState({user:t.data.user})})).catch((function(e){return console.log(e)})),this.invoiceService.getAllInvoices(this.props.loggedUser._id).then((function(t){return e.setState({invoices:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e,t,n,a,s,c,r,i,o,l,d,j,h,p,O,m,v,g,f,k,S=this;return this.props.loggedUser?Object(C.jsx)(u.a,{className:"conteiner-profile",children:Object(C.jsxs)(w.a,{children:[Object(C.jsxs)(b.a,{md:4,children:[Object(C.jsx)("h2",{children:"User data"}),Object(C.jsxs)(M.a,{show:this.state.saved,onHide:this.handleClose,children:[Object(C.jsx)(M.a.Header,{closeButton:!0,children:Object(C.jsx)(M.a.Title,{children:"Congratulations"})}),Object(C.jsx)(M.a.Body,{children:"The changes have been saved"}),Object(C.jsxs)(M.a.Footer,{children:[Object(C.jsx)(x.b,{className:"button-name",to:"/sneakers",children:"Go to sneakers"}),Object(C.jsx)(I.a,{variant:"dark",onClick:this.handleClose,children:"Close"})]})]}),Object(C.jsxs)(U.a,{onSubmit:this.handleSubmit,children:[Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Email"}),Object(C.jsx)(U.a.Control,{onChange:this.handleInputChange,name:"email",plaintext:!0,readOnly:!0,value:null===(e=this.state)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email})]}),Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Password"}),Object(C.jsx)(U.a.Control,{onChange:this.handleInputChange,name:"password",required:!0,type:"password",placeholder:"Password"})]}),Object(C.jsxs)(w.a,{children:[Object(C.jsx)(b.a,{children:Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Fist name"}),Object(C.jsx)(U.a.Control,{name:"firstName",onChange:this.handleInputChange,type:"text",placeholder:"John",value:null===(n=this.state)||void 0===n||null===(a=n.user)||void 0===a?void 0:a.firstName})]})}),Object(C.jsx)(b.a,{children:Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Last name"}),Object(C.jsx)(U.a.Control,{onChange:this.handleInputChange,name:"lastName",type:"text",placeholder:"Smith",value:null===(s=this.state)||void 0===s||null===(c=s.user)||void 0===c?void 0:c.lastName})]})})]}),Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Street"}),Object(C.jsx)(U.a.Control,{onChange:function(e){return S.handleInputChange(e,!0)},name:"street",type:"text",placeholder:"Elm Street",value:null===(r=this.state)||void 0===r||null===(i=r.user)||void 0===i||null===(o=i.address)||void 0===o?void 0:o.street})]}),Object(C.jsxs)(w.a,{children:[Object(C.jsx)(b.a,{children:Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Number street"}),Object(C.jsx)(U.a.Control,{onChange:function(e){return S.handleInputChange(e,!0)},name:"numberStreet",type:"text",placeholder:"11",value:null===(l=this.state)||void 0===l||null===(d=l.user)||void 0===d||null===(j=d.address)||void 0===j?void 0:j.numberStreet})]})}),Object(C.jsx)(b.a,{children:Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Floor"}),Object(C.jsx)(U.a.Control,{onChange:function(e){return S.handleInputChange(e,!0)},name:"floor",type:"text",placeholder:"1\xba A",value:null===(h=this.state)||void 0===h||null===(p=h.user)||void 0===p||null===(O=p.address)||void 0===O?void 0:O.floor})]})})]}),Object(C.jsxs)(w.a,{children:[Object(C.jsx)(b.a,{children:Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Postal Code"}),Object(C.jsx)(U.a.Control,{onChange:function(e){return S.handleInputChange(e,!0)},name:"cp",type:"text",placeholder:"28050",value:null===(m=this.state)||void 0===m||null===(v=m.user)||void 0===v||null===(g=v.address)||void 0===g?void 0:g.cp})]})}),Object(C.jsx)(b.a,{children:Object(C.jsxs)(U.a.Group,{children:[Object(C.jsx)(U.a.Label,{children:"Phone"}),Object(C.jsx)(U.a.Control,{onChange:this.handleInputChange,name:"phoneNumber",type:"tel",placeholder:"657676767",value:null===(f=this.state)||void 0===f||null===(k=f.user)||void 0===k?void 0:k.phoneNumber})]})})]}),Object(C.jsx)(b.a,{children:Object(C.jsx)(I.a,{variant:"dark",type:"submit",children:"Submit"})})]})]}),Object(C.jsxs)(b.a,{md:8,children:[Object(C.jsx)("h2",{children:"Your Invoices"}),Object(C.jsxs)(Z.a,{children:[Object(C.jsxs)("thead",{children:[Object(C.jsx)("th",{children:"Invoice number"}),Object(C.jsx)("th",{children:"# items"}),Object(C.jsx)("th",{children:"Date"}),Object(C.jsx)("th",{children:"Amount"})]}),Object(C.jsx)("tbody",{children:this.state.invoices.length&&this.state.invoices.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsx)(x.b,{className:"button-name",to:"/confirmation/".concat(e._id),children:e._id})}),Object(C.jsx)("td",{children:e.products.length}),Object(C.jsx)("td",{children:e.createdAt}),Object(C.jsxs)("td",{children:[e.total,"\u20ac"]})]},t)}))})]})]})]})}):Object(C.jsx)(P.a,{to:"/"})}}]),n}(a.Component)),ne=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).storeCart=function(e){a.cartService.getCart(e).then((function(e){a.setState({cart:e.data}),a.storeProductsQuantity(e.data.products.length)})).catch((function(e){return console.log(e)}))},a.removeCartItem=function(e,t){a.cartService.removeProduct(e,t).then((function(e){a.setState({cart:e.data}),a.storeProductsQuantity(e.data.products.length)})).catch((function(e){return console.log(e)}))},a.emptyCart=function(e){a.cartService.emptyCart(e).then((function(e){a.setState({cart:e.data}),a.storeProductsQuantity(0)})).catch((function(e){return console.log(e)}))},a.addCartItem=function(e,t){a.cartService.addProduct(e,t).then((function(e){a.setState({cart:e.data}),a.storeProductsQuantity(e.data.products.length)})).catch((function(e){return console.log(e)}))},a.storeUser=function(e){var t;a.setState({loggedUser:e,productsQuantity:null===e||void 0===e||null===(t=e.products)||void 0===t?void 0:t.length})},a.storeProductsQuantity=function(e){a.setState({productsQuantity:e})},a.state={loggedUser:void 0,productsQuantity:0,cart:void 0},a.authService=new g,a.cartService=new _,a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.authService.isloggedin().then((function(t){e.storeUser(t.data),e.storeCart(t.data._id)})).catch((function(t){return e.storeUser(null)}))}},{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(S,{productsQuantity:this.state.productsQuantity,storeUser:this.storeUser,loggedUser:this.state.loggedUser}),Object(C.jsxs)(P.d,{children:[Object(C.jsx)(P.b,{path:"/",exact:!0,render:function(){return Object(C.jsx)(R,{})}}),Object(C.jsx)(P.b,{path:"/sneakers",exact:!0,render:function(){return Object(C.jsx)(J,{loggedUser:e.state.loggedUser,addCartItem:e.addCartItem})}}),Object(C.jsx)(P.b,{path:"/sneakers/:id",exact:!0,render:function(t){return Object(C.jsx)(Y,Object(i.a)(Object(i.a)({},t),{},{loggedUser:e.state.loggedUser,addCartItem:e.addCartItem}))}}),this.state.loggedUser?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(P.b,{path:"/cart",exact:!0,render:function(t){return Object(C.jsx)(X,{loggedUser:e.state.loggedUser,storeUser:e.storeUser,cart:e.state.cart,removeCartItem:e.removeCartItem,emptyCart:e.emptyCart,storeProductsQuantity:e.storeProductsQuantity})}}),Object(C.jsx)(P.b,{path:"/confirmation/:invoiceId",exact:!0,render:function(t){return Object(C.jsx)($,Object(i.a)(Object(i.a)({},t),{},{loggedUser:e.state.loggedUser,storeUser:e.storeUser}))}}),Object(C.jsx)(P.b,{path:"/profile",exact:!0,render:function(t){return Object(C.jsx)(te,{storeUser:e.storeUser,loggedUser:e.state.loggedUser})}})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(P.b,{path:"/signup",render:function(t){return Object(C.jsx)(N,Object(i.a)(Object(i.a)({},t),{},{storeUser:e.storeUser}))}}),Object(C.jsx)(P.b,{path:"/login",render:function(t){return Object(C.jsx)(L,Object(i.a)(Object(i.a)({},t),{},{storeUser:e.storeUser}))}})]})]})]})}}]),n}(a.Component),ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,141)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};n(127);r.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(x.a,{children:Object(C.jsx)(ne,{})})}),document.getElementById("root")),ae()},68:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){}},[[128,1,2]]]);
//# sourceMappingURL=main.214f5ef3.chunk.js.map